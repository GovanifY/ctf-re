# English: Deployment guide

- Make sure the folder `chals_out` exists (generated by `gen_chals.py` ).
- Make sure the folder `db` exists ( comes from a database export of CTFd ).
- Run `mk-ssh-keys` to generate the required keys and patch `teams.json`
- Ensure `challenges.json` doesn't have any non standard/ascii characters
- Create a new NixOps deployment: `nixops create ./logical.nix ./physical.nix -s state_file.nixops`
- Launch your machine: `nixops deploy -s state_file.nixops`
- Send the keys to your students through the `send-mails.py` script and do not
  forget the evil laugh!




# Français: Comment déployer

- S'assurer que dans ce repertoire il y a un `chals_out` (généré par le système)
- S'assurer qu'il y a `db/` (`RE_XXXX.zip`, vient de CTFd)
- Faire tourner `mk-ssh-keys` pour générer les clefs et patcher le `teams.json`
- Attention aux bugs d'Unicode sur les `challenges.json`, il faut filtrer la description.
- Créer un déploiement NixOps: `nixops create ./logical.nix ./physical.nix -s state_file.nixops`
- Lancer le déploiement NixOps: `nixops deploy -s state_file.nixops`
- Envoyez les ssh keys a vos étudiants et n'oubliez surtout pas le rire
  machiavélique!
